

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>dGen Code Base &mdash; dGen Globetrotter 0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="python.agent_mutation package" href="python.agent_mutation.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> dGen Globetrotter
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Example Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="generating_agents.html">Generating Agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">dGen Code Base</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="python.agent_mutation.html">python.agent_mutation package</a></li>
<li class="toctree-l3"><a class="reference internal" href="python.excel.html">python.excel package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.agents">python.agents module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.config">python.config module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.decorators">python.decorators module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python-dgen-model-module">python.dgen_model module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.diffusion_functions">python.diffusion_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.dispatch_functions">python.dispatch_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.financial_functions">python.financial_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.settings">python.settings module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python-storage-functions-module">python.storage_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.tariff_functions">python.tariff_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python.utility_functions">python.utility_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-python">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="input_data.html">Input Data</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">dGen Globetrotter</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>dGen Code Base</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/source/api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dgen-code-base">
<h1>dGen Code Base<a class="headerlink" href="#dgen-code-base" title="Permalink to this headline">¶</a></h1>
<p>The dGen source code is located within the <code class="file docutils literal notranslate"><span class="pre">python/</span></code> directory. This page contains information on the classes, functions, attributes, and methods used by dGen. This page is useful for debugging errors, or examining how different elements interact incase a special run is desired.</p>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="python.agent_mutation.html">python.agent_mutation package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="python.agent_mutation.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.agent_mutation.html#python-agent-mutation-elec-module">python.agent_mutation.elec module</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.agent_mutation.html#module-contents">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="python.excel.html">python.excel package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="python.excel.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.excel.html#module-python.excel.excel_objects">python.excel.excel_objects module</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.excel.html#module-python.excel">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-python.agents">
<span id="python-agents-module"></span><h2>python.agents module<a class="headerlink" href="#module-python.agents" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="python.agents.Agents">
<em class="property">class </em><code class="sig-prename descclassname">python.agents.</code><code class="sig-name descname">Agents</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">agents_df</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/agents.html#Agents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.agents.Agents" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Agents class instance</p>
<dl class="py method">
<dt id="python.agents.Agents.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">agents_df</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/agents.html#Agents.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.agents.Agents.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize Agents Class
:param agents_df: Pandas Dataframe containing agents and their attributes.</p>
<blockquote>
<div><p>Index = agent ids, columns = agent attributes</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>agent_df</strong> (<em>‘pd.df’</em>) – Agents DataFrame</p></li>
<li><p><strong>agent_ids</strong> (<em>‘ndarray’</em>) – Array of agent ids</p></li>
<li><p><strong>agent_attrs</strong> (<em>‘ndarray’</em>) – Array of agent attributes</p></li>
<li><p><strong>attrs_types</strong> (<em>‘pd.Series’</em>) – Array of dtypes for each attribute</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="python.agents.Agents.add_attrs">
<code class="sig-name descname">add_attrs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">attr_df</span></em>, <em class="sig-param"><span class="n">on</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/agents.html#Agents.add_attrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.agents.Agents.add_attrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Add attributes to agents
:param df: Pandas Dataframe containing new attributes for agents
:type df: ‘pd.df’
:param on: Pandas on kwarg, if None join on index
:type on: ‘object’</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>agent_df</strong> (<em>‘pd.df’</em>) – Updated Agents DataFrame</p></li>
<li><p><strong>attrs_types</strong> (<em>‘pd.Series’</em>) – Updated attribute types</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="python.agents.Agents.apply_chunk_on_row">
<code class="sig-name descname">apply_chunk_on_row</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">cores</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/agents.html#Agents.apply_chunk_on_row"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.agents.Agents.apply_chunk_on_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Divide the dataframe into chunks according to the number of processors and
then apply function to agents on an agent by agent basis within that
dataframe chunk. Function should return a df to be merged onto the original df.
:param func: Function to be applied to each agent</p>
<blockquote>
<div><p>Must take a pd.Series as the argument</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cores</strong> (<em>'int'</em>) – Number of cores to use for computation</p></li>
<li><p><strong>in_place</strong> (<em>'bool'</em>) – If true, set self.df = results of compute
else return results of compute</p></li>
<li><p><strong>**kwargs</strong> – Any kwargs for func</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>results_df</strong> – Dataframe of agents after application of func</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="python.agents.Agents.apply_on_frame">
<code class="sig-name descname">apply_on_frame</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">func_args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/agents.html#Agents.apply_on_frame"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.agents.Agents.apply_on_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply function to agents using agent.df
:param func: Function to be applied to agent.df</p>
<blockquote>
<div><p>Must take a pd.df as the arguement</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func_args</strong> (<em>'object'</em>) – args for func</p></li>
<li><p><strong>in_place</strong> (<em>'bool'</em>) – If true, set self.df = results of compute
else return results of compute</p></li>
<li><p><strong>**kwargs</strong> – Any kwargs for func</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>results_df</strong> – Dataframe of agents after application of func</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="python.agents.Agents.apply_on_row">
<code class="sig-name descname">apply_on_row</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">cores</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/agents.html#Agents.apply_on_row"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.agents.Agents.apply_on_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply function to agents on an agent by agent basis. Function should
return a df to be merged onto the original df.
:param func: Function to be applied to each agent</p>
<blockquote>
<div><p>Must take a pd.Series as the argument</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cores</strong> (<em>'int'</em>) – Number of cores to use for computation</p></li>
<li><p><strong>in_place</strong> (<em>'bool'</em>) – If true, set self.df = results of compute
else return results of compute</p></li>
<li><p><strong>**kwargs</strong> – Any kwargs for func</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>results_df</strong> – Dataframe of agents after application of func</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>‘pd.df’</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="python.agents.Agents.check_types">
<em class="property">property </em><code class="sig-name descname">check_types</code><a class="headerlink" href="#python.agents.Agents.check_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Check to see if attribute types have changed</p>
</dd></dl>

<dl class="py method">
<dt id="python.agents.Agents.chunk_on_row">
<code class="sig-name descname">chunk_on_row</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">cores</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">in_place</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/agents.html#Agents.chunk_on_row"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.agents.Agents.chunk_on_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper function around apply_on_row with runtime tests.</p>
</dd></dl>

<dl class="py method">
<dt id="python.agents.Agents.on_frame">
<code class="sig-name descname">on_frame</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">func_args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">in_place</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/agents.html#Agents.on_frame"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.agents.Agents.on_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper function around apply_on_frame with runtime tests.</p>
</dd></dl>

<dl class="py method">
<dt id="python.agents.Agents.on_row">
<code class="sig-name descname">on_row</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">cores</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">in_place</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/agents.html#Agents.on_row"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.agents.Agents.on_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper function around apply_chunk_on_row with runtime tests.</p>
</dd></dl>

<dl class="py method">
<dt id="python.agents.Agents.run_with_runtime_tests">
<code class="sig-name descname">run_with_runtime_tests</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">how_to_apply</span></em>, <em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">func_args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cores</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/agents.html#Agents.run_with_runtime_tests"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.agents.Agents.run_with_runtime_tests" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Apply a function to a dataframe with:</dt><dd><p>-on_frame
-on_row
-chunk_on_row</p>
</dd>
</dl>
<p>While conducting run time tests.
Tests
—–
- Dropped Columns: Columns were in df_in, but not in df_out
- Duplicated Columns: New columns appear with a ‘_x’ appended, indicating a pandas merge error
- Null Values in New Columns: Can be overridden with config variable.
- dType Change in Old Columns: Can be overridden with config variable.
- Consistant Length: Number of rows (agents) hasn’t changed.
- Consistant agent_ids: agent_ids in df_in match those in df_out
.. rubric:: Notes</p>
<ul class="simple">
<li><dl class="simple">
<dt>Returns a df with agent_id as a <em>column</em>, not as the index.</dt><dd><p>-THIS ALLOWS US TO GET RID OF MOST df.set_index(‘agent_id’) AND df.reset_index(drop=False) THROUGHOUT THE CODEBASE.</p>
</dd>
</dl>
</li>
<li><p>Drops ‘bad columns’ that are created by merge errors or index resets [‘level_0’,’index’]</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt id="python.agents.Agents.to_pickle">
<code class="sig-name descname">to_pickle</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/agents.html#Agents.to_pickle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.agents.Agents.to_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Save agents to pickle file
:param file_name: File name for agents pickle file
:type file_name: ‘sting’</p>
</dd></dl>

<dl class="py method">
<dt id="python.agents.Agents.update_attrs">
<em class="property">property </em><code class="sig-name descname">update_attrs</code><a class="headerlink" href="#python.agents.Agents.update_attrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Update agent class attributes</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="python.agents.Solar_Agents">
<em class="property">class </em><code class="sig-prename descclassname">python.agents.</code><code class="sig-name descname">Solar_Agents</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">agents_df</span></em>, <em class="sig-param"><span class="n">scenario_df</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/agents.html#Solar_Agents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.agents.Solar_Agents" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#python.agents.Agents" title="python.agents.Agents"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.agents.Agents</span></code></a></p>
<p>Solar Agents class instance</p>
<dl class="py method">
<dt id="python.agents.Solar_Agents.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">agents_df</span></em>, <em class="sig-param"><span class="n">scenario_df</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/agents.html#Solar_Agents.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.agents.Solar_Agents.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize Solar Agents Class
:param agents_df: Pandas Dataframe containing agents and their attributes.</p>
<blockquote>
<div><p>Index = agent ids, columns = agent attributes</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>scenario_df</strong> (<em>'pd.df'</em>) – Pandas Dataframe containing scenario/solar specific attributes</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>agent_df</strong> (<em>‘pd.df’</em>) – Agents DataFrame</p></li>
<li><p><strong>agent_ids</strong> (<em>‘ndarray’</em>) – Array of agent ids</p></li>
<li><p><strong>agent_attrs</strong> (<em>‘ndarray’</em>) – Array of agent attributes</p></li>
<li><p><strong>attrs_types</strong> (<em>‘pd.Series’</em>) – Array of dtypes for each attribute</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-python.config">
<span id="python-config-module"></span><h2>python.config module<a class="headerlink" href="#module-python.config" title="Permalink to this headline">¶</a></h2>
<p>This module contains variables that can be changed, but are not exposed to non-expert users.</p>
</div>
<div class="section" id="module-python.decorators">
<span id="python-decorators-module"></span><h2>python.decorators module<a class="headerlink" href="#module-python.decorators" title="Permalink to this headline">¶</a></h2>
<p>Module of accessory decorators, mainly for logging purposes.</p>
<dl class="py class">
<dt id="python.decorators.fn_timer">
<em class="property">class </em><code class="sig-prename descclassname">python.decorators.</code><code class="sig-name descname">fn_timer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">logger</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">tab_level</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">prefix</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/decorators.html#fn_timer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.decorators.fn_timer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Decorater class for profiling the run-time of functions.</p>
</dd></dl>

</div>
<div class="section" id="python-dgen-model-module">
<h2>python.dgen_model module<a class="headerlink" href="#python-dgen-model-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-python.diffusion_functions">
<span id="python-diffusion-functions-module"></span><h2>python.diffusion_functions module<a class="headerlink" href="#module-python.diffusion_functions" title="Permalink to this headline">¶</a></h2>
<p>Module contains functions to calculate the bass diffusion of distributed generation adoption.</p>
<dl class="simple">
<dt>On an agent-level basis <code class="xref py py-mod docutils literal notranslate"><span class="pre">diffusion_functions</span></code>:</dt><dd><ol class="arabic simple">
<li><p>Determines maximum market size as a function of payback time</p></li>
<li><p>Parameterizes the Bass diffusion curve with diffusion rates (p, q) set by payback time</p></li>
<li><p>Determines the current stage (equivaluent time) of diffusion based on existing market and current economics</p></li>
<li><p>Calculates the new market share by stepping forward on diffusion curve.</p></li>
</ol>
</dd>
</dl>
<dl class="py function">
<dt id="python.diffusion_functions.bass_diffusion">
<code class="sig-prename descclassname">python.diffusion_functions.</code><code class="sig-name descname">bass_diffusion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/diffusion_functions.html#bass_diffusion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.diffusion_functions.bass_diffusion" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the fraction of population that diffuse into the max_market_share.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>) – <dl class="py attribute">
<dt id="python.diffusion_functions.df.p">
<code class="sig-prename descclassname">df.</code><code class="sig-name descname">p</code><a class="headerlink" href="#python.diffusion_functions.df.p" title="Permalink to this definition">¶</a></dt>
<dd><p>Bass diffusion parameter defining the coeffieicent of innovation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="python.diffusion_functions.df.q">
<code class="sig-prename descclassname">df.</code><code class="sig-name descname">q</code><a class="headerlink" href="#python.diffusion_functions.df.q" title="Permalink to this definition">¶</a></dt>
<dd><p>Bass diffusion parameter definint the coefficient of imitation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="python.diffusion_functions.df.t">
<code class="sig-prename descclassname">df.</code><code class="sig-name descname">t</code><a class="headerlink" href="#python.diffusion_functions.df.t" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of years since the diffusion model began.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Input dataframe with <cite>new_adopt_fraction</cite> column added. <cite>new_adopt_fraction</cite> represents the proportion of the overall population that will adopt the technology.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>DataFrame</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is different than the fraction of population that will adopt, which is the max market share.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="python.diffusion_functions.calc_diffusion_market_share">
<code class="sig-prename descclassname">python.diffusion_functions.</code><code class="sig-name descname">calc_diffusion_market_share</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">is_first_year</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/diffusion_functions.html#calc_diffusion_market_share"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.diffusion_functions.calc_diffusion_market_share" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the fraction of overall population that have adopted the technology in the current period.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – <dl class="py attribute">
<dt id="python.diffusion_functions.df.payback_period">
<code class="sig-prename descclassname">df.</code><code class="sig-name descname">payback_period</code><a class="headerlink" href="#python.diffusion_functions.df.payback_period" title="Permalink to this definition">¶</a></dt>
<dd><p>Payback period in years.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="python.diffusion_functions.df.max_market_share">
<code class="sig-prename descclassname">df.</code><code class="sig-name descname">max_market_share</code><a class="headerlink" href="#python.diffusion_functions.df.max_market_share" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum market share as decimal percentage.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="python.diffusion_functions.df.current_market_share">
<code class="sig-prename descclassname">df.</code><code class="sig-name descname">current_market_share</code><a class="headerlink" href="#python.diffusion_functions.df.current_market_share" title="Permalink to this definition">¶</a></dt>
<dd><p>Current market share as decimal percentage.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

</p></li>
<li><p><strong>is_first_year</strong> (<em>bool</em>) – If <cite>True</cite>, the new equivalent time (<cite>teq2</cite>) is equal to the original <cite>teq_yr1</cite> plus the increment defined in <cite>teq</cite>.
Otherwise, <cite>teq2</cite> is equal to <cite>teq</cite> plus 2 years.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The fraction of overall population that have adopted the technology</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>This does not specify the actual new adoption fraction without knowing adoption in the previous period.</p></li>
<li><p>The relative economic attractiveness controls the p, q value in the Bass diffusion model.</p></li>
<li><p>The current assumption is that only payback and MBS are being used, that pp is bounded [0-30] and MBS is bounded [0-120].</p></li>
</ol>
</div>
</dd></dl>

<dl class="py function">
<dt id="python.diffusion_functions.calc_diffusion_solar">
<code class="sig-prename descclassname">python.diffusion_functions.</code><code class="sig-name descname">calc_diffusion_solar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">is_first_year</span></em>, <em class="sig-param"><span class="n">bass_params</span></em>, <em class="sig-param"><span class="n">override_p_value</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">override_q_value</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">override_teq_yr1_value</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/diffusion_functions.html#calc_diffusion_solar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.diffusion_functions.calc_diffusion_solar" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the market share (ms) added in the solve year.</p>
<p>Market share must be less than max market share (mms) except  when initial ms is greater than the calculated mms.
For this circumstance, no diffusion allowed until mms &gt; ms. Also, do not allow ms to decrease if economics deterioriate.
Using the calculated market share, relevant quantities are updated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Input dataframe.</p></li>
<li><p><strong>is_first_year</strong> (<em>bool</em>) – Passed to <code class="xref py py-func docutils literal notranslate"><span class="pre">diffusion_functions.calc_diffusion_market_share()</span></code> to determine the increment of <cite>teq</cite></p></li>
<li><p><strong>bass_params</strong> (<em>pandas.DataFrame</em>) – DataFrame generally derived from <code class="xref py py-func docutils literal notranslate"><span class="pre">settings.get_bass_params()</span></code>, includes the following attributes: config.BA_COLUMN, <cite>sector_abbr</cite>, <cite>state_id</cite>, <cite>p</cite>, <cite>q</cite>, <cite>teq_yr1</cite>, <cite>tech</cite>.</p></li>
<li><p><strong>override_p_values</strong> (<em>float</em><em> , </em><em>optional</em>) – Value to override bass diffusion <cite>p</cite> coefficient of innovation with.</p></li>
<li><p><strong>overide_q_values</strong> (<em>float</em><em>, </em><em>optional</em>) – Value to override bass diffusion <cite>q</cite> coefficient of immitation with.</p></li>
<li><p><strong>override_teq_yr1_value</strong> (<em>float</em><em>, </em><em>optional</em>) – Value to override bass diffusion <cite>teq_yr1</cite> value representing the number of years since diffusion began for the first year of observation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe contains <cite>market_last_year</cite> column to inform diffusion in next year.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="python.diffusion_functions.calc_equiv_time">
<code class="sig-prename descclassname">python.diffusion_functions.</code><code class="sig-name descname">calc_equiv_time</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/diffusion_functions.html#calc_equiv_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.diffusion_functions.calc_equiv_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the “equivalent time” on the diffusion curve. This defines the gradient of adoption.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>) – <dl class="py attribute">
<dt id="python.diffusion_functions.df.msly">
<code class="sig-prename descclassname">df.</code><code class="sig-name descname">msly</code><a class="headerlink" href="#python.diffusion_functions.df.msly" title="Permalink to this definition">¶</a></dt>
<dd><p>Market share last year [at end of the previous solve] as decimal</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="python.diffusion_functions.df.mms">
<code class="sig-prename descclassname">df.</code><code class="sig-name descname">mms</code><a class="headerlink" href="#python.diffusion_functions.df.mms" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum market share as a decimal percentage.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="id0">
<code class="sig-prename descclassname">df.</code><code class="sig-name descname">p</code><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd><p>Bass diffusion parameter defining the coefficient of innovation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="id1">
<code class="sig-prename descclassname">df.</code><code class="sig-name descname">q</code><a class="headerlink" href="#id1" title="Permalink to this definition">¶</a></dt>
<dd><p>Bass diffusion paramter defining the coefficient of imitation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Input dataframe with <cite>teq</cite> column added. <cite>teq</cite> is the equivalent number of years after diffusion started on the diffusion curve.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="python.diffusion_functions.set_bass_param">
<code class="sig-prename descclassname">python.diffusion_functions.</code><code class="sig-name descname">set_bass_param</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">bass_params</span></em>, <em class="sig-param"><span class="n">override_p_value</span></em>, <em class="sig-param"><span class="n">override_q_value</span></em>, <em class="sig-param"><span class="n">override_teq_yr1_value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/diffusion_functions.html#set_bass_param"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.diffusion_functions.set_bass_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the <cite>p</cite> &amp; <cite>q</cite> parameters which define the Bass diffusion curve.</p>
<p><cite>p</cite> is the coefficient of innovation, external influence or advertising effect.
<cite>q</cite> is the coefficient of imitation, internal influence or word-of-mouth effect.</p>
<p><cite>p</cite> &amp; <cite>q</cite> values defined by <code class="xref py py-func docutils literal notranslate"><span class="pre">diffusion_functions.bass_diffusion()</span></code> can be overrode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>) – <dl class="py attribute">
<dt id="python.diffusion_functions.df.scaled_metric_value">
<code class="sig-prename descclassname">df.</code><code class="sig-name descname">scaled_metric_value</code><a class="headerlink" href="#python.diffusion_functions.df.scaled_metric_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Scaled value of economic attractiveness (range of 0 - 1)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Input dataframe with <cite>p</cite> and <cite>q</cite> columns addded.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-python.dispatch_functions">
<span id="python-dispatch-functions-module"></span><h2>python.dispatch_functions module<a class="headerlink" href="#module-python.dispatch_functions" title="Permalink to this headline">¶</a></h2>
<p>Currently battery storage functions are not utilizied.</p>
<dl class="py class">
<dt id="python.dispatch_functions.Battery">
<em class="property">class </em><code class="sig-prename descclassname">python.dispatch_functions.</code><code class="sig-name descname">Battery</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nameplate_cap</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">nameplate_power</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">SOC_min</span><span class="o">=</span><span class="default_value">0.2</span></em>, <em class="sig-param"><span class="n">eta_charge</span><span class="o">=</span><span class="default_value">0.91</span></em>, <em class="sig-param"><span class="n">eta_discharge</span><span class="o">=</span><span class="default_value">0.91</span></em>, <em class="sig-param"><span class="n">cycles</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/dispatch_functions.html#Battery"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.dispatch_functions.Battery" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>Degradation functions were just rough estimations from a slide deck, and currently have a disjoint at transition.</p>
</div>
<dl class="py method">
<dt id="python.dispatch_functions.Battery.set_cap_and_power">
<code class="sig-name descname">set_cap_and_power</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nameplate_cap</span></em>, <em class="sig-param"><span class="n">nameplate_power</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/dispatch_functions.html#Battery.set_cap_and_power"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.dispatch_functions.Battery.set_cap_and_power" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.dispatch_functions.Battery.set_cycle_deg">
<code class="sig-name descname">set_cycle_deg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cycles</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/dispatch_functions.html#Battery.set_cycle_deg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.dispatch_functions.Battery.set_cycle_deg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="python.dispatch_functions.calc_estimator_params">
<code class="sig-prename descclassname">python.dispatch_functions.</code><code class="sig-name descname">calc_estimator_params</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">load_and_pv_profile</span></em>, <em class="sig-param"><span class="n">tariff</span></em>, <em class="sig-param"><span class="n">export_tariff</span></em>, <em class="sig-param"><span class="n">eta_charge</span></em>, <em class="sig-param"><span class="n">eta_discharge</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/dispatch_functions.html#calc_estimator_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.dispatch_functions.calc_estimator_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Create four 12-length vectors, weekend/weekday and
cost/revenue. They are a summation of each day’s 12 hours of lowest/highest
cost electricity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>load_and_pv_profile</strong> (<em>numpy.ndarray</em>) – 8760 array of the agent’s load_profile - pv_profile</p></li>
<li><p><strong>t</strong> (<a class="reference internal" href="#python.tariff_functions.Tariff" title="python.tariff_functions.Tariff"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.tariff_functions.Tariff</span></code></a>) – Tariff class object</p></li>
<li><p><strong>export_tariff</strong> (<a class="reference internal" href="#python.tariff_functions.Export_Tariff" title="python.tariff_functions.Export_Tariff"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.tariff_functions.Export_Tariff</span></code></a>) – Export tariff class object</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>TOU windows are aligned with when the battery would be dispatching for demand peak shaving.</p></li>
<li><p>The battery will be able to dispatch fully and recharge fully every 24 hour cycle.</p></li>
</ol>
</div>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<ol class="arabic simple">
<li><p>Bring back consideration of tiers.</p></li>
<li><p>Consider coming up with a better method that captures exportation, CPP, etc
Maybe? Or just confirm a simple estimation works with our dGen set,
and use the accurate dispatch for any other analysis.</p></li>
</ol>
</div>
</dd></dl>

<dl class="py function">
<dt id="python.dispatch_functions.calc_min_possible_demands_vector">
<code class="sig-prename descclassname">python.dispatch_functions.</code><code class="sig-name descname">calc_min_possible_demands_vector</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">res</span></em>, <em class="sig-param"><span class="n">load_and_pv_profile</span></em>, <em class="sig-param"><span class="n">pv_profile</span></em>, <em class="sig-param"><span class="n">d_periods_month</span></em>, <em class="sig-param"><span class="n">batt</span></em>, <em class="sig-param"><span class="n">t</span></em>, <em class="sig-param"><span class="n">month</span></em>, <em class="sig-param"><span class="n">restrict_charge_to_pv_gen</span></em>, <em class="sig-param"><span class="n">batt_start_level</span></em>, <em class="sig-param"><span class="n">estimate_demand_levels</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/dispatch_functions.html#calc_min_possible_demands_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.dispatch_functions.calc_min_possible_demands_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Currently battery storage functions are not utilizied.</p>
<p>Function that determines the minimum possible demands that this battery can achieve for a particular month.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<a class="reference internal" href="#python.tariff_functions.Tariff" title="python.tariff_functions.Tariff"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.tariff_functions.Tariff</span></code></a>) – Tariff class object</p></li>
<li><p><strong>batt</strong> (<a class="reference internal" href="#python.dispatch_functions.Battery" title="python.dispatch_functions.Battery"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.dispatch_functions.Battery</span></code></a>) – Battery class object</p></li>
</ul>
</dd>
</dl>
<div class="admonition-todo admonition" id="id4">
<p class="admonition-title">Todo</p>
<p>Add a vector of forced discharges, for demand response representation</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="python.dispatch_functions.cartesian">
<code class="sig-prename descclassname">python.dispatch_functions.</code><code class="sig-name descname">cartesian</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arrays</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/dispatch_functions.html#cartesian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.dispatch_functions.cartesian" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a cartesian product of input arrays.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arrays</strong> (<em>list of numpy.ndarray</em>) – 1-D arrays to form the cartesian product of.</p></li>
<li><p><strong>out</strong> (<em>numpy.ndarray</em>) – Array to place the cartesian product in.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>out</strong> – 2-D array of shape (M, len(arrays)) containing cartesian products
formed of input arrays.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cartesian</span><span class="p">(([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]))</span>
<span class="go">array([[1, 4, 6],</span>
<span class="go">       [1, 4, 7],</span>
<span class="go">       [1, 5, 6],</span>
<span class="go">       [1, 5, 7],</span>
<span class="go">       [2, 4, 6],</span>
<span class="go">       [2, 4, 7],</span>
<span class="go">       [2, 5, 6],</span>
<span class="go">       [2, 5, 7],</span>
<span class="go">       [3, 4, 6],</span>
<span class="go">       [3, 4, 7],</span>
<span class="go">       [3, 5, 6],</span>
<span class="go">       [3, 5, 7]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="python.dispatch_functions.determine_cheapest_possible_of_given_demand_levels">
<code class="sig-prename descclassname">python.dispatch_functions.</code><code class="sig-name descname">determine_cheapest_possible_of_given_demand_levels</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">load_and_pv_profile</span></em>, <em class="sig-param"><span class="n">pv_profile</span></em>, <em class="sig-param"><span class="n">unique_periods</span></em>, <em class="sig-param"><span class="n">d_combinations</span></em>, <em class="sig-param"><span class="n">d_combo_n</span></em>, <em class="sig-param"><span class="n">Dn_month</span></em>, <em class="sig-param"><span class="n">d_periods_index</span></em>, <em class="sig-param"><span class="n">batt</span></em>, <em class="sig-param"><span class="n">restrict_charge_to_pv_gen</span></em>, <em class="sig-param"><span class="n">batt_start_level</span></em>, <em class="sig-param"><span class="n">tariff</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/dispatch_functions.html#determine_cheapest_possible_of_given_demand_levels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.dispatch_functions.determine_cheapest_possible_of_given_demand_levels" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="python.dispatch_functions.determine_optimal_dispatch">
<code class="sig-prename descclassname">python.dispatch_functions.</code><code class="sig-name descname">determine_optimal_dispatch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">load_profile</span></em>, <em class="sig-param"><span class="n">pv_profile</span></em>, <em class="sig-param"><span class="n">batt</span></em>, <em class="sig-param"><span class="n">t</span></em>, <em class="sig-param"><span class="n">export_tariff</span></em>, <em class="sig-param"><span class="n">d_inc_n</span><span class="o">=</span><span class="default_value">50</span></em>, <em class="sig-param"><span class="n">DP_inc</span><span class="o">=</span><span class="default_value">50</span></em>, <em class="sig-param"><span class="n">estimator_params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">estimated</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">restrict_charge_to_pv_gen</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">estimate_demand_levels</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/dispatch_functions.html#determine_optimal_dispatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.dispatch_functions.determine_optimal_dispatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that determines the optimal dispatch for a battery, and determines the resulting first year bill with the system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>load_profile</strong> (<em>numpy.ndarray</em>) – Original load profile prior to modification by PV or storage</p></li>
<li><p><strong>pv_profile</strong> (<em>numpy.ndarray</em>) – PV profile of equal length to the <cite>load_profile</cite></p></li>
<li><p><strong>t</strong> (<a class="reference internal" href="#python.tariff_functions.Tariff" title="python.tariff_functions.Tariff"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.tariff_functions.Tariff</span></code></a>) – Tariff class object</p></li>
<li><p><strong>batt</strong> (<a class="reference internal" href="#python.dispatch_functions.Battery" title="python.dispatch_functions.Battery"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.dispatch_functions.Battery</span></code></a>) – Battery class object</p></li>
<li><p><strong>export_tariff</strong> (<a class="reference internal" href="#python.tariff_functions.Export_Tariff" title="python.tariff_functions.Export_Tariff"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.tariff_functions.Export_Tariff</span></code></a>) – Export tariff class object</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the battery level matrices, 0 index corresponds to an empty battery, and
the highest index corresponds to a full battery</p>
</div>
<div class="admonition-todo admonition" id="id5">
<p class="admonition-title">Todo</p>
<ol class="arabic simple">
<li><p>Having cost-to-go equal cost of filling the battery at the end may not be
working.</p></li>
<li><p>Have warnings for classes of errors. Same for bill calculator, such as when
net load in a given period is negative either have warnings, or outright nans, when an illegal move is chosen</p></li>
<li><p>If there are no demand charges, don’t calc &amp; don’t have a limit on
demand_max_profile for the following dispatch.</p></li>
</ol>
</div>
</dd></dl>

<dl class="py function">
<dt id="python.dispatch_functions.estimate_annual_arbitrage_profit">
<code class="sig-prename descclassname">python.dispatch_functions.</code><code class="sig-name descname">estimate_annual_arbitrage_profit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">power</span></em>, <em class="sig-param"><span class="n">capacity</span></em>, <em class="sig-param"><span class="n">eta_charge</span></em>, <em class="sig-param"><span class="n">eta_discharge</span></em>, <em class="sig-param"><span class="n">cost_sum</span></em>, <em class="sig-param"><span class="n">revenue_sum</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/dispatch_functions.html#estimate_annual_arbitrage_profit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.dispatch_functions.estimate_annual_arbitrage_profit" title="Permalink to this definition">¶</a></dt>
<dd><p>This function uses the 12x24 marginal energy costs from calc_estimator_params to estimate the potential arbitrage value of a battery.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>power</strong> (<em>float</em>) – Inherited from <a class="reference internal" href="#python.dispatch_functions.Battery" title="python.dispatch_functions.Battery"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.dispatch_functions.Battery</span></code></a></p></li>
<li><p><strong>capacity</strong> (<em>float</em>) – Inherited from <a class="reference internal" href="#python.dispatch_functions.Battery" title="python.dispatch_functions.Battery"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.dispatch_functions.Battery</span></code></a></p></li>
<li><p><strong>eta_charge</strong> (<em>float</em>) – Inherited from <a class="reference internal" href="#python.dispatch_functions.Battery" title="python.dispatch_functions.Battery"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.dispatch_functions.Battery</span></code></a></p></li>
<li><p><strong>eta_discharge</strong> (<em>float</em>) – Inherited from <a class="reference internal" href="#python.dispatch_functions.Battery" title="python.dispatch_functions.Battery"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.dispatch_functions.Battery</span></code></a></p></li>
<li><p><strong>cost_sum</strong> (<em>numpy.ndarray</em>) – 12-length sorted vector of summed energy costs for charging in the cheapest 12 hours of each day</p></li>
<li><p><strong>revenue_sum</strong> (<em>numpy.ndarray</em>) – 12-length sorted vector of summed energy revenue for discharging in the most expensive 12 hours of each day</p></li>
</ul>
</dd>
</dl>
<div class="admonition-todo admonition" id="id6">
<p class="admonition-title">Todo</p>
<p>Restrict action if cap &gt; (12 * power)</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-python.financial_functions">
<span id="python-financial-functions-module"></span><h2>python.financial_functions module<a class="headerlink" href="#module-python.financial_functions" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="python.financial_functions.calc_financial_performance">
<code class="sig-prename descclassname">python.financial_functions.</code><code class="sig-name descname">calc_financial_performance</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataframe</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/financial_functions.html#calc_financial_performance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.financial_functions.calc_financial_performance" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to calculate the payback period and join it on the agent dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataframe</strong> (<em>pandas.DataFrame</em>) – Agent dataframe</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Agent dataframe with <cite>payback_period</cite> joined on dataframe</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="python.financial_functions.calc_max_market_share">
<code class="sig-prename descclassname">python.financial_functions.</code><code class="sig-name descname">calc_max_market_share</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataframe</span></em>, <em class="sig-param"><span class="n">max_market_share_df</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/financial_functions.html#calc_max_market_share"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.financial_functions.calc_max_market_share" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the maximum marketshare available for each agent.
:param dataframe:</p>
<blockquote>
<div><dl class="py attribute">
<dt id="python.financial_functions.metric_value">
<code class="sig-prename descclassname">python.financial_functions.</code><code class="sig-name descname">metric_value</code><a class="headerlink" href="#python.financial_functions.metric_value" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>max_market_share_df</strong> (<em>pandas.DataFrame</em>) – Set by <code class="xref py py-meth docutils literal notranslate"><span class="pre">settings.ScenarioSettings.get_max_marketshare()</span></code>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Input DataFrame with <cite>max_market_share</cite> and <cite>metric</cite> columns joined on.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="python.financial_functions.calc_payback_vectorized">
<code class="sig-prename descclassname">python.financial_functions.</code><code class="sig-name descname">calc_payback_vectorized</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cfs</span></em>, <em class="sig-param"><span class="n">tech_lifetime</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/financial_functions.html#calc_payback_vectorized"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.financial_functions.calc_payback_vectorized" title="Permalink to this definition">¶</a></dt>
<dd><p>Payback calculator.
Can be either simple payback or discounted payback, depending on whether
the input cash flow is discounted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cfs</strong> (<em>numpy.ndarray</em>) – Project cash flows ($/yr).</p></li>
<li><p><strong>tech_lifetime</strong> (<em>int</em>) – Lifetime of technology used for project.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>pp</strong> – Interpolated payback period (years)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="python.financial_functions.calc_system_size_and_financial_performance">
<code class="sig-prename descclassname">python.financial_functions.</code><code class="sig-name descname">calc_system_size_and_financial_performance</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">agent</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/financial_functions.html#calc_system_size_and_financial_performance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.financial_functions.calc_system_size_and_financial_performance" title="Permalink to this definition">¶</a></dt>
<dd><p>This function accepts the characteristics of a single agent and
evaluates the financial performance of a set of solar+storage
system sizes. The system size with the highest NPV is selected.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agent</strong> (<em>pandas.Series</em>) – Single agent (row) from an agent dataframe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Agent with system size, business model and corresponding financial performance.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="python.financial_functions.calc_ttd">
<code class="sig-prename descclassname">python.financial_functions.</code><code class="sig-name descname">calc_ttd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cfs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/financial_functions.html#calc_ttd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.financial_functions.calc_ttd" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate time to double investment based on the MIRR.</p>
<p>This is used for the commercial and industrial sectors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cfs</strong> (<em>numpy.ndarray</em>) – Project cash flows ($/yr).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ttd</strong> – Time to double investment (years).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="python.financial_functions.cashflow_constructor">
<code class="sig-prename descclassname">python.financial_functions.</code><code class="sig-name descname">cashflow_constructor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bill_savings</span></em>, <em class="sig-param"><span class="n">pv_size</span></em>, <em class="sig-param"><span class="n">pv_price</span></em>, <em class="sig-param"><span class="n">pv_om</span></em>, <em class="sig-param"><span class="n">batt_cap</span></em>, <em class="sig-param"><span class="n">batt_power</span></em>, <em class="sig-param"><span class="n">batt_cost_per_kw</span></em>, <em class="sig-param"><span class="n">batt_cost_per_kwh</span></em>, <em class="sig-param"><span class="n">batt_om_per_kw</span></em>, <em class="sig-param"><span class="n">batt_om_per_kwh</span></em>, <em class="sig-param"><span class="n">batt_chg_frac</span></em>, <em class="sig-param"><span class="n">sector</span></em>, <em class="sig-param"><span class="n">itc</span></em>, <em class="sig-param"><span class="n">deprec_sched</span></em>, <em class="sig-param"><span class="n">fed_tax_rate</span></em>, <em class="sig-param"><span class="n">state_tax_rate</span></em>, <em class="sig-param"><span class="n">real_d</span></em>, <em class="sig-param"><span class="n">analysis_years</span></em>, <em class="sig-param"><span class="n">inflation</span></em>, <em class="sig-param"><span class="n">down_payment_fraction</span></em>, <em class="sig-param"><span class="n">loan_rate</span></em>, <em class="sig-param"><span class="n">loan_term</span></em>, <em class="sig-param"><span class="n">cash_incentives</span><span class="o">=</span><span class="default_value">array([0])</span></em>, <em class="sig-param"><span class="n">ibi</span><span class="o">=</span><span class="default_value">array([0])</span></em>, <em class="sig-param"><span class="n">cbi</span><span class="o">=</span><span class="default_value">array([0])</span></em>, <em class="sig-param"><span class="n">pbi</span><span class="o">=</span><span class="default_value">array([[0]])</span></em>, <em class="sig-param"><span class="n">print_statements</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/financial_functions.html#cashflow_constructor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.financial_functions.cashflow_constructor" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the system cash flows based on the capex, opex, bill savings, incentives, tax implications, and other factors</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bill_savings</strong> (<em>&quot;numpy.ndarray&quot;</em>) – Annual bill savings ($/yr) from system adoption from 1st year through system lifetime</p></li>
<li><p><strong>pv_size</strong> (<em>&quot;numpy.float64&quot;</em>) – system capacity selected by agent (kW)</p></li>
<li><p><strong>pv_price</strong> (<em>&quot;float&quot;</em>) – system capex ($/kW)</p></li>
<li><p><strong>pv_om</strong> (<em>&quot;float&quot;</em>) – system operation and maintanence cost ($/kW)</p></li>
<li><p><strong>batt_cap</strong> (<em>&quot;numpy.float64&quot;</em>) – energy capacity of battery selected (kWh)</p></li>
<li><p><strong>batt_power</strong> (<em>&quot;numpy.float64&quot;</em>) – demand capacity of battery selected (kW)</p></li>
<li><p><strong>batt_cost_per_kw</strong> (<em>&quot;float&quot;</em>) – capex of battery per kW installed ($/kW)</p></li>
<li><p><strong>batt_cost_per_kwh</strong> (<em>&quot;float&quot;</em>) – capex of battery per kWh installed ($/kWh)</p></li>
<li><p><strong>batt_om_per_kw</strong> (<em>&quot;float&quot;</em>) – opex of battery per kW installed ($/kW-yr)</p></li>
<li><p><strong>batt_om_per_kwh</strong> (<em>&quot;float&quot;</em>) – opex of battery per kW installed ($/kWh-yr)</p></li>
<li><p><strong>batt_chg_frac</strong> (<em>&quot;int&quot;</em>) – fraction of the battery’s energy that it gets from a co-hosted PV system. Used for ITC calculation.</p></li>
<li><p><strong>sector</strong> (<em>&quot;str&quot;</em>) – agent sector</p></li>
<li><p><strong>itc</strong> (<em>&quot;float&quot;</em>) – fraction of capex offset by federal investment tax credit</p></li>
<li><p><strong>deprec_sched</strong> (<em>&quot;list&quot;</em>) – fraction of capex eligible for tax-based depreciation</p></li>
<li><p><strong>fed_tax_rate</strong> (<em>&quot;float&quot;</em>) – average tax rate as fraction from federal taxes</p></li>
<li><p><strong>state_tax_rate</strong> (<em>&quot;int&quot;</em>) – average tax rate as fraction from state taxes</p></li>
<li><p><strong>real_d</strong> (<em>&quot;float&quot;</em>) – annua discount rate in real terms</p></li>
<li><p><strong>analysis_years</strong> (<em>&quot;int&quot;</em>) – number of years to use in economic analysis</p></li>
<li><p><strong>inflation</strong> (<em>&quot;float&quot;</em>) – annual average inflation rate as fraction e.g. 0.025</p></li>
<li><p><strong>down_payment_fraction</strong> (<em>&quot;int&quot;</em>) – fraction of capex used as system down payment</p></li>
<li><p><strong>loan_rate_real</strong> (<em>&quot;float&quot;</em>) – real interest rate for debt payments</p></li>
<li><p><strong>loan_term</strong> (<em>&quot;int&quot;</em>) – number of years for loan term</p></li>
<li><p><strong>cash_incentives</strong> (<em>&quot;numpy.ndarray&quot;</em>) – array describing eligible cash-based incentives e.g. $</p></li>
<li><p><strong>ibi</strong> (<em>&quot;numpy.ndarray&quot;</em>) – array describing eligible investment-based incentives e.g. 0.2</p></li>
<li><p><strong>cbi</strong> (<em>&quot;numpy.ndarray&quot;</em>) – array describing eligible one-time capacity-based incentives e.g. $/kW</p></li>
<li><p><strong>pbi</strong> (<em>&quot;numpy.ndarray&quot;</em>) – array describing eligible ongoing performance-based incentives e.g $/kWh-yr</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>cf</strong> (<em>‘dtype</em>) – Annual cash flows of project investment ($/yr)</p></li>
<li><p><strong>cf_discounted</strong> (<em>‘dtype’</em>) – Annual discounted cash flows of project investment ($/yr)</p></li>
<li><p><strong>npv</strong> (<em>‘dtype’</em>) – Net present value ($) of project investment using WACC</p></li>
<li><p><strong>bill_savings</strong> (<em>‘dtype’</em>) – Nominal cash flow of the annual bill savings over the lifetime of the system</p></li>
<li><p><strong>after_tax_bill_savings</strong> (<em>‘dtype’</em>) – Effective after-tax bill savings (electricity costs are tax-deductible for commercial entities)</p></li>
<li><p><strong>pv_cost</strong> (<em>‘dtype’</em>) – Capex of system in ($)</p></li>
<li><p><strong>batt_cost</strong> (<em>‘dtype’</em>) – Capex of battery in ($)</p></li>
<li><p><strong>installed_cost</strong> (<em>‘dtype’</em>) – Combined capex of system + battery</p></li>
<li><p><strong>up_front_cost</strong> (<em>‘dtype</em>) – Capex in 0th year as down payment</p></li>
<li><p><strong>batt_om_cf</strong> (<em>‘dtype’</em>) – Annual cashflows of battery opex</p></li>
<li><p><strong>operating_expenses</strong> (<em>‘dtype’</em>) – Combined annual opex of system + battery ($/yr)</p></li>
<li><p><strong>pv_itc_value</strong> (<em>‘dtype’</em>) – Absolute value of investment tax credit for system ($)</p></li>
<li><p><strong>batt_itc_value</strong> (<em>‘dtype’</em>) – Absolute value of investment tax credit for battery ($)</p></li>
<li><p><strong>itc_value</strong> (<em>‘dtype’</em>) – Absolute value of investment tax credit for combined system + battery ($)</p></li>
<li><p><strong>deprec_basis</strong> (<em>‘dtype’</em>) – Absolute value of depreciable basis of system ($)</p></li>
<li><p><strong>deprec_deductions</strong> (<em>‘dtype’</em>) – Annual amount of depreciable capital in given year ($)</p></li>
<li><p><strong>initial_debt</strong> (<em>‘dtype’</em>) – Amount of debt for loan ($)</p></li>
<li><p><strong>annual_principal_and_interest_payment</strong> (<em>‘dtype’</em>) – Annual amount of debt service payment, principal + interest ($)</p></li>
<li><p><strong>debt_balance</strong> (<em>‘dtype’</em>) – Annual amount of debt remaining in given year ($)</p></li>
<li><p><strong>interest_payments</strong> (<em>‘dtype’</em>) – Annual amount of interest payment in given year ($)</p></li>
<li><p><strong>principal_and_interest_payments</strong> (<em>‘dtype’</em>) – Array of annual principal and interest payments ($)</p></li>
<li><p><strong>total_taxable_income</strong> (<em>‘dtype’</em>) – Amount of stateincome from incentives eligible for taxes</p></li>
<li><p><strong>state_deductions</strong> (<em>‘dtype’</em>) – Reduction to state taxable income from interest, operating expenses, or bill savings depending on sector</p></li>
<li><p><strong>total_taxable_state_income_less_deductions</strong> (<em>‘dtype’</em>) – Total taxable state income less any applicable deductions</p></li>
<li><p><strong>state_income_taxes</strong> (<em>‘dtype’</em>) – Amount of state income tax i.e. net taxable income by tax rate</p></li>
<li><p><strong>fed_deductions</strong> (<em>‘dtype’</em>) – Reduction to federal taxable income from interest, operating expenses, or bill savings depending on sector</p></li>
<li><p><strong>total_taxable_fed_income_less_deductions</strong> (<em>‘dtype’</em>) – Total taxable federal income less any applicable deductions</p></li>
<li><p><strong>fed_income_taxes</strong> (<em>‘dtype’</em>) – Amount of federal income tax i.e. net taxable income by tax rate</p></li>
<li><p><strong>interest_payments_tax_savings</strong> (<em>‘dtype’</em>) – Amount of tax savings from deductions of interest payments</p></li>
<li><p><strong>operating_expenses_tax_savings</strong> (<em>‘dtype’</em>) – Amount of tax savings from deductions of operating expenses</p></li>
<li><p><strong>deprec_deductions_tax_savings</strong> (<em>‘dtype’</em>) – Amount of tax savings from deductions of capital depreciation</p></li>
<li><p><strong>elec_OM_deduction_decrease_tax_liability</strong> (<em>‘dtype’</em>) – Amount of tax savings from deductions of electricity costs as deductible business expense</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition-todo admonition" id="id7">
<p class="admonition-title">Todo</p>
<ol class="arabic simple">
<li><p>Sales tax basis and rate</p></li>
<li><p>note that sales tax goes into depreciable basis</p></li>
<li><p>Propery taxes (res can deduct from income taxes, I think)</p></li>
<li><p>insurance</p></li>
<li><p>add pre-tax cash flow</p></li>
<li><p>add residential mortgage option</p></li>
<li><p>add carbon tax revenue</p></li>
<li><p>More exhaustive checking. I have confirmed basic formulations against SAM, but there are many permutations that haven’t been checked.</p></li>
<li><p>make incentives reduce depreciable basis</p></li>
<li><p>add a flag for high incentive levels</p></li>
<li><p>battery price schedule, for replacements</p></li>
<li><p>improve inverter replacement</p></li>
<li><p>improve battery replacement</p></li>
<li><p>add inflation adjustment for replacement prices</p></li>
<li><p>improve deprec schedule handling</p></li>
<li><p>Make financing unique to each agent</p></li>
<li><p>Make battery replacements depreciation an input, with default of 7 year MACRS</p></li>
<li><p>Have a better way to deal with capacity vs effective capacity and battery costs</p></li>
<li><p>Make it so it can accept different loan terms</p></li>
</ol>
</div>
</dd></dl>

<dl class="py function">
<dt id="python.financial_functions.virr">
<code class="sig-prename descclassname">python.financial_functions.</code><code class="sig-name descname">virr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cfs</span></em>, <em class="sig-param"><span class="n">precision</span><span class="o">=</span><span class="default_value">0.005</span></em>, <em class="sig-param"><span class="n">rmin</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">rmax1</span><span class="o">=</span><span class="default_value">0.3</span></em>, <em class="sig-param"><span class="n">rmax2</span><span class="o">=</span><span class="default_value">0.5</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/financial_functions.html#virr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.financial_functions.virr" title="Permalink to this definition">¶</a></dt>
<dd><p>Vectorized IRR calculator.</p>
<p>First calculate a 3D array of the discounted cash flows along cash flow series, time period, and discount rate. Sum over time to
collapse to a 2D array which gives the NPV along a range of discount rates
for each cash flow series. Next, find crossover where NPV is zero–corresponds
to the lowest real IRR value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cfs</strong> (<em>numpy.ndarray</em>) – Rows are cash flow series, cols are time periods</p></li>
<li><p><strong>precision</strong> (<em>float</em>) – Level of accuracy for the inner IRR band, default value 0.005%</p></li>
<li><p><strong>rmin</strong> (<em>float</em>) – Lower bound of the inner IRR band default value 0%</p></li>
<li><p><strong>rmax1</strong> (<em>float</em>) – Upper bound of the inner IRR band default value 30%</p></li>
<li><p><strong>rmax2</strong> (<em>float</em>) – upper bound of the outer IRR band. e.g. 50% Values in the outer
band are calculated to 1% precision, IRRs outside the upper band
return the rmax2 value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>IRRs for cash flow series</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>For performance, negative IRRs are not calculated, returns “-1” and values are only calculated to an acceptable precision.</p>
</dd></dl>

</div>
<div class="section" id="module-python.settings">
<span id="python-settings-module"></span><h2>python.settings module<a class="headerlink" href="#module-python.settings" title="Permalink to this headline">¶</a></h2>
<p>Settings class objects.</p>
<dl class="py class">
<dt id="python.settings.ModelSettings">
<em class="property">class </em><code class="sig-prename descclassname">python.settings.</code><code class="sig-name descname">ModelSettings</code><a class="reference internal" href="../_modules/python/settings.html#ModelSettings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ModelSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class containing the model settings parameters</p>
<dl class="py attribute">
<dt id="python.settings.ModelSettings.model_init">
<code class="sig-name descname">model_init</code><a class="headerlink" href="#python.settings.ModelSettings.model_init" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="python.settings.ModelSettings.cdata">
<code class="sig-name descname">cdata</code><a class="headerlink" href="#python.settings.ModelSettings.cdata" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="python.settings.ModelSettings.out_dir">
<code class="sig-name descname">out_dir</code><a class="headerlink" href="#python.settings.ModelSettings.out_dir" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="python.settings.ModelSettings.start_year">
<code class="sig-name descname">start_year</code><a class="headerlink" href="#python.settings.ModelSettings.start_year" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="python.settings.ModelSettings.input_scenarios">
<code class="sig-name descname">input_scenarios</code><a class="headerlink" href="#python.settings.ModelSettings.input_scenarios" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="python.settings.ModelSettings.git_hash">
<code class="sig-name descname">git_hash</code><a class="headerlink" href="#python.settings.ModelSettings.git_hash" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="python.settings.ModelSettings.model_path">
<code class="sig-name descname">model_path</code><a class="headerlink" href="#python.settings.ModelSettings.model_path" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="python.settings.ModelSettings.local_cores">
<code class="sig-name descname">local_cores</code><a class="headerlink" href="#python.settings.ModelSettings.local_cores" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="python.settings.ModelSettings.used_scenario_names">
<code class="sig-name descname">used_scenario_names</code><a class="headerlink" href="#python.settings.ModelSettings.used_scenario_names" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="python.settings.ModelSettings.check_scenario_name">
<code class="sig-name descname">check_scenario_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">scenario_settings</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ModelSettings.check_scenario_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ModelSettings.check_scenario_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if <cite>ModelSettings.scenario_name</cite> is in <cite>ModelSettings.used_scenario_names</cite></p>
</dd></dl>

<dl class="py method">
<dt id="python.settings.ModelSettings.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">attr</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ModelSettings.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ModelSettings.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ModelSettings.set">
<code class="sig-name descname">set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">attr</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ModelSettings.set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ModelSettings.set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ModelSettings.validate">
<code class="sig-name descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ModelSettings.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ModelSettings.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ModelSettings.validate_property">
<code class="sig-name descname">validate_property</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">property_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ModelSettings.validate_property"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ModelSettings.validate_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if property is not null</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="python.settings.ScenarioSettings">
<em class="property">class </em><code class="sig-prename descclassname">python.settings.</code><code class="sig-name descname">ScenarioSettings</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input_scenario</span></em>, <em class="sig-param"><span class="n">model_settings</span></em>, <em class="sig-param"><span class="n">time_step_increment</span><span class="o">=</span><span class="default_value">2</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Storage of all scenario specific inputs</p>
<dl class="py method">
<dt id="python.settings.ScenarioSettings.collapse_sectors">
<code class="sig-name descname">collapse_sectors</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">columns</span></em>, <em class="sig-param"><span class="n">adders</span><span class="o">=</span><span class="default_value">[]</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.collapse_sectors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.collapse_sectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Split each row into groups by sector, then stack the groups</p>
</dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.get_bass_params">
<code class="sig-name descname">get_bass_params</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.get_bass_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.get_bass_params" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.get_batt_price_trajectories">
<code class="sig-name descname">get_batt_price_trajectories</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.get_batt_price_trajectories"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.get_batt_price_trajectories" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.get_financing_terms">
<code class="sig-name descname">get_financing_terms</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.get_financing_terms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.get_financing_terms" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.get_load_growth">
<code class="sig-name descname">get_load_growth</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">year</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.get_load_growth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.get_load_growth" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.get_max_market_share">
<code class="sig-name descname">get_max_market_share</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.get_max_market_share"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.get_max_market_share" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.get_nem_settings">
<code class="sig-name descname">get_nem_settings</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">year</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.get_nem_settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.get_nem_settings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.get_pv_specs">
<code class="sig-name descname">get_pv_specs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.get_pv_specs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.get_pv_specs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.get_rate_escalations">
<code class="sig-name descname">get_rate_escalations</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.get_rate_escalations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.get_rate_escalations" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.get_wholesale_elec_prices">
<code class="sig-name descname">get_wholesale_elec_prices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.get_wholesale_elec_prices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.get_wholesale_elec_prices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.input_csv_folder">
<em class="property">property </em><code class="sig-name descname">input_csv_folder</code><a class="headerlink" href="#python.settings.ScenarioSettings.input_csv_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Location of input csv files</p>
</dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.loadFromDataFrame">
<code class="sig-name descname">loadFromDataFrame</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">table_name</span></em>, <em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.loadFromDataFrame"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.loadFromDataFrame" title="Permalink to this definition">¶</a></dt>
<dd><p>Accept a dataframe from the input spreadsheet and load it into the scenario settings</p>
</dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.load_avoided_costs">
<code class="sig-name descname">load_avoided_costs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.load_avoided_costs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.load_avoided_costs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.load_bass_params">
<code class="sig-name descname">load_bass_params</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.load_bass_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.load_bass_params" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.load_core_agent_attributes">
<code class="sig-name descname">load_core_agent_attributes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.load_core_agent_attributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.load_core_agent_attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.load_electric_rates_json">
<code class="sig-name descname">load_electric_rates_json</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.load_electric_rates_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.load_electric_rates_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.load_financing_rates">
<code class="sig-name descname">load_financing_rates</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.load_financing_rates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.load_financing_rates" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.load_interconnection_settings">
<code class="sig-name descname">load_interconnection_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.load_interconnection_settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.load_interconnection_settings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.load_load_growth">
<code class="sig-name descname">load_load_growth</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.load_load_growth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.load_load_growth" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.load_max_market_share">
<code class="sig-name descname">load_max_market_share</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.load_max_market_share"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.load_max_market_share" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.load_nem_settings">
<code class="sig-name descname">load_nem_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.load_nem_settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.load_nem_settings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.load_normalized_hourly_resource_solar">
<code class="sig-name descname">load_normalized_hourly_resource_solar</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.load_normalized_hourly_resource_solar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.load_normalized_hourly_resource_solar" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.load_normalized_load_profiles">
<code class="sig-name descname">load_normalized_load_profiles</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.load_normalized_load_profiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.load_normalized_load_profiles" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.load_rate_escalations">
<code class="sig-name descname">load_rate_escalations</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.load_rate_escalations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.load_rate_escalations" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.load_starting_capacities">
<code class="sig-name descname">load_starting_capacities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.load_starting_capacities"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.load_starting_capacities" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.load_wholesale_electricity">
<code class="sig-name descname">load_wholesale_electricity</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.load_wholesale_electricity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.load_wholesale_electricity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.model_years">
<em class="property">property </em><code class="sig-name descname">model_years</code><a class="headerlink" href="#python.settings.ScenarioSettings.model_years" title="Permalink to this definition">¶</a></dt>
<dd><p>Range of years to model</p>
</dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.validate">
<code class="sig-name descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.write_folders">
<code class="sig-name descname">write_folders</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model_settings</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.write_folders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.write_folders" title="Permalink to this definition">¶</a></dt>
<dd><p>Make output folders for the run</p>
</dd></dl>

<dl class="py method">
<dt id="python.settings.ScenarioSettings.write_inputs">
<code class="sig-name descname">write_inputs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#ScenarioSettings.write_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.ScenarioSettings.write_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Export key attributes to output folder</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="python.settings.SectorInputs">
<em class="property">class </em><code class="sig-prename descclassname">python.settings.</code><code class="sig-name descname">SectorInputs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#SectorInputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.SectorInputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Storage of sector-specific scenario inputs</p>
</dd></dl>

<dl class="py function">
<dt id="python.settings.check_type">
<code class="sig-prename descclassname">python.settings.</code><code class="sig-name descname">check_type</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">expected_type</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#check_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.check_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="python.settings.init_model_settings">
<code class="sig-prename descclassname">python.settings.</code><code class="sig-name descname">init_model_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#init_model_settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.init_model_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>initialize Model Settings object (this controls settings that apply to all scenarios to be executed)</p>
</dd></dl>

<dl class="py function">
<dt id="python.settings.init_scenario_settings">
<code class="sig-prename descclassname">python.settings.</code><code class="sig-name descname">init_scenario_settings</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">scenario_file</span></em>, <em class="sig-param"><span class="n">model_settings</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#init_scenario_settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.init_scenario_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>load scenario specific data and configure output settings</p>
</dd></dl>

<dl class="py function">
<dt id="python.settings.load_scenario_to_inputSheet">
<code class="sig-prename descclassname">python.settings.</code><code class="sig-name descname">load_scenario_to_inputSheet</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xls_file</span></em>, <em class="sig-param"><span class="n">model_settings</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/settings.html#load_scenario_to_inputSheet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.settings.load_scenario_to_inputSheet" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregate agent-level results into ba-level results for the given year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xls_file</strong> (<em>str</em>) – Filepath in the input_scenarios folder.</p></li>
<li><p><strong>model_settings</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">settings.ModelSettings</span></code>) – Global model settings tariff object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Scenario specific settings and model data loaded from the excel spreadsheet and the associated input csv data folder.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#python.settings.ScenarioSettings" title="python.settings.ScenarioSettings">settings.ScenarioSettings</a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="python-storage-functions-module">
<h2>python.storage_functions module<a class="headerlink" href="#python-storage-functions-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-python.tariff_functions">
<span id="python-tariff-functions-module"></span><h2>python.tariff_functions module<a class="headerlink" href="#module-python.tariff_functions" title="Permalink to this headline">¶</a></h2>
<p>Functions for determining the tariff</p>
<dl class="py class">
<dt id="python.tariff_functions.Export_Tariff">
<em class="property">class </em><code class="sig-prename descclassname">python.tariff_functions.</code><code class="sig-name descname">Export_Tariff</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">full_retail_nem</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">prices</span><span class="o">=</span><span class="default_value">array([[0.0]])</span></em>, <em class="sig-param"><span class="n">levels</span><span class="o">=</span><span class="default_value">array([[0.0]])</span></em>, <em class="sig-param"><span class="n">periods_8760</span><span class="o">=</span><span class="default_value">array([0, 0, 0, ..., 0, 0, 0])</span></em>, <em class="sig-param"><span class="n">period_tou_n</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/tariff_functions.html#Export_Tariff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.tariff_functions.Export_Tariff" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Structure of compensation for exported generation.</p>
<p>Currently only two styles: full-retail NEM, and instantanous TOU energy value.</p>
<dl class="py method">
<dt id="python.tariff_functions.Export_Tariff.set_constant_sell_price">
<code class="sig-name descname">set_constant_sell_price</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">price</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/tariff_functions.html#Export_Tariff.set_constant_sell_price"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.tariff_functions.Export_Tariff.set_constant_sell_price" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="python.tariff_functions.Tariff">
<em class="property">class </em><code class="sig-prename descclassname">python.tariff_functions.</code><code class="sig-name descname">Tariff</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_day</span><span class="o">=</span><span class="default_value">6</span></em>, <em class="sig-param"><span class="n">urdb_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">json_file_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dict_obj</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">api_key</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/tariff_functions.html#Tariff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.tariff_functions.Tariff" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.urdb_id">
<code class="sig-name descname">urdb_id</code><a class="headerlink" href="#python.tariff_functions.Tariff.urdb_id" title="Permalink to this definition">¶</a></dt>
<dd><p>id for utility rate database. US, not international.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.eia_id">
<code class="sig-name descname">eia_id</code><a class="headerlink" href="#python.tariff_functions.Tariff.eia_id" title="Permalink to this definition">¶</a></dt>
<dd><p>The EIA assigned ID number for the utility associated with this tariff</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#python.tariff_functions.Tariff.name" title="Permalink to this definition">¶</a></dt>
<dd><p>tariff name</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.utility">
<code class="sig-name descname">utility</code><a class="headerlink" href="#python.tariff_functions.Tariff.utility" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of utility this tariff is associated with</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.fixed_charge">
<code class="sig-name descname">fixed_charge</code><a class="headerlink" href="#python.tariff_functions.Tariff.fixed_charge" title="Permalink to this definition">¶</a></dt>
<dd><p>Fixed monthly charge in $/mo.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.peak_kW_capacity_max">
<code class="sig-name descname">peak_kW_capacity_max</code><a class="headerlink" href="#python.tariff_functions.Tariff.peak_kW_capacity_max" title="Permalink to this definition">¶</a></dt>
<dd><p>The annual maximum kW of demand that a customer can have and still be on this tariff</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.peak_kW_capacity_min">
<code class="sig-name descname">peak_kW_capacity_min</code><a class="headerlink" href="#python.tariff_functions.Tariff.peak_kW_capacity_min" title="Permalink to this definition">¶</a></dt>
<dd><p>The annula minimum kW of demand that a customer can have and still be on this tariff</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.kWh_useage_max">
<code class="sig-name descname">kWh_useage_max</code><a class="headerlink" href="#python.tariff_functions.Tariff.kWh_useage_max" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum kWh of average monthly consumption that a customer can have and still be on this tariff</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.kWh_useage_min">
<code class="sig-name descname">kWh_useage_min</code><a class="headerlink" href="#python.tariff_functions.Tariff.kWh_useage_min" title="Permalink to this definition">¶</a></dt>
<dd><p>The minimum kWh of average monthly consumption that a customer can have and still be on this tariff</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.sector">
<code class="sig-name descname">sector</code><a class="headerlink" href="#python.tariff_functions.Tariff.sector" title="Permalink to this definition">¶</a></dt>
<dd><p>residential, commercial, or industrial</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.comments">
<code class="sig-name descname">comments</code><a class="headerlink" href="#python.tariff_functions.Tariff.comments" title="Permalink to this definition">¶</a></dt>
<dd><p>comments from the urdb</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.description">
<code class="sig-name descname">description</code><a class="headerlink" href="#python.tariff_functions.Tariff.description" title="Permalink to this definition">¶</a></dt>
<dd><p>tariff description from urdb</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.source">
<code class="sig-name descname">source</code><a class="headerlink" href="#python.tariff_functions.Tariff.source" title="Permalink to this definition">¶</a></dt>
<dd><p>uri for the source of the tariff</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.uri">
<code class="sig-name descname">uri</code><a class="headerlink" href="#python.tariff_functions.Tariff.uri" title="Permalink to this definition">¶</a></dt>
<dd><p>link the the urdb page</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.voltage_category">
<code class="sig-name descname">voltage_category</code><a class="headerlink" href="#python.tariff_functions.Tariff.voltage_category" title="Permalink to this definition">¶</a></dt>
<dd><p>secondary, primary, transmission</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.d_flat_exists">
<code class="sig-name descname">d_flat_exists</code><a class="headerlink" href="#python.tariff_functions.Tariff.d_flat_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean of whether there is a flat (not tou) demand charge component. Flat demand is also called monthly or seasonal demand.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.d_flat_n">
<code class="sig-name descname">d_flat_n</code><a class="headerlink" href="#python.tariff_functions.Tariff.d_flat_n" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of unique flat demand period constructions. Does NOT correspond to width of d_flat_x constructs.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.d_flat_prices">
<code class="sig-name descname">d_flat_prices</code><a class="headerlink" href="#python.tariff_functions.Tariff.d_flat_prices" title="Permalink to this definition">¶</a></dt>
<dd><p>The prices of each tier/period combination for flat demand. Rows are tiers, columns are months. Differs from TOU, where columns are periods.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.d_flat_levels">
<code class="sig-name descname">d_flat_levels</code><a class="headerlink" href="#python.tariff_functions.Tariff.d_flat_levels" title="Permalink to this definition">¶</a></dt>
<dd><p>The limit (total kW) of each of each tier/period combination for flat demand. Rows are tiers, columns are months. Differs from TOU, where columns are periods.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.d_tou_exists">
<code class="sig-name descname">d_tou_exists</code><a class="headerlink" href="#python.tariff_functions.Tariff.d_tou_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean of whether there is a tou (not flat) demand charge component</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.d_tou_n">
<code class="sig-name descname">d_tou_n</code><a class="headerlink" href="#python.tariff_functions.Tariff.d_tou_n" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of unique tou demand periods. Minimum of 1, since I’m counting nocharge periods still as a period.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.d_tou_prices">
<code class="sig-name descname">d_tou_prices</code><a class="headerlink" href="#python.tariff_functions.Tariff.d_tou_prices" title="Permalink to this definition">¶</a></dt>
<dd><p>The prices of each tier/period combination for tou demand. Rows are tiers, columns are periods.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.d_tou_levels">
<code class="sig-name descname">d_tou_levels</code><a class="headerlink" href="#python.tariff_functions.Tariff.d_tou_levels" title="Permalink to this definition">¶</a></dt>
<dd><p>The limit (total kW) of each of each tier/period combination for tou demand. Rows are tiers, columns are periods.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.e_exists">
<code class="sig-name descname">e_exists</code><a class="headerlink" href="#python.tariff_functions.Tariff.e_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean of whether there is a flat (not tou) demand charge component</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.e_tou_exists">
<code class="sig-name descname">e_tou_exists</code><a class="headerlink" href="#python.tariff_functions.Tariff.e_tou_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean of whether there is a flat (not tou) demand charge component</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.e_n">
<code class="sig-name descname">e_n</code><a class="headerlink" href="#python.tariff_functions.Tariff.e_n" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of unique energy periods. Minimum of 1, since I’m counting nocharge periods still as a period.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.e_prices">
<code class="sig-name descname">e_prices</code><a class="headerlink" href="#python.tariff_functions.Tariff.e_prices" title="Permalink to this definition">¶</a></dt>
<dd><p>The prices of each tier/period combination for flat demand. Rows are tiers, columns are periods.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.e_levels">
<code class="sig-name descname">e_levels</code><a class="headerlink" href="#python.tariff_functions.Tariff.e_levels" title="Permalink to this definition">¶</a></dt>
<dd><p>The limit (total kWh) of each of each tier/period combination for energy. Rows are tiers, columns are periods.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.e_wkday_12by24">
<code class="sig-name descname">e_wkday_12by24</code><a class="headerlink" href="#python.tariff_functions.Tariff.e_wkday_12by24" title="Permalink to this definition">¶</a></dt>
<dd><p>12 by 24 period definition for weekday energy. Rows are months, columns are hours.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.e_wkend_12by24">
<code class="sig-name descname">e_wkend_12by24</code><a class="headerlink" href="#python.tariff_functions.Tariff.e_wkend_12by24" title="Permalink to this definition">¶</a></dt>
<dd><p>12 by 24 period definition for weekend energy. Rows are months, columns are hours.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.d_wkday_12by24">
<code class="sig-name descname">d_wkday_12by24</code><a class="headerlink" href="#python.tariff_functions.Tariff.d_wkday_12by24" title="Permalink to this definition">¶</a></dt>
<dd><p>12 by 24 period definition for weekday energy. Rows are months, columns are hours.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.d_wkend_12by24">
<code class="sig-name descname">d_wkend_12by24</code><a class="headerlink" href="#python.tariff_functions.Tariff.d_wkend_12by24" title="Permalink to this definition">¶</a></dt>
<dd><p>12 by 24 period definition for weekend energy. Rows are months, columns are hours.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.d_tou_8760">
<code class="sig-name descname">d_tou_8760</code><a class="headerlink" href="#python.tariff_functions.Tariff.d_tou_8760" title="Permalink to this definition">¶</a></dt>
<dd><p>8760 of tou demand prices.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.e_tou_8760">
<code class="sig-name descname">e_tou_8760</code><a class="headerlink" href="#python.tariff_functions.Tariff.e_tou_8760" title="Permalink to this definition">¶</a></dt>
<dd><p>8760 of tou energy prices.</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.e_prices_no_tier">
<code class="sig-name descname">e_prices_no_tier</code><a class="headerlink" href="#python.tariff_functions.Tariff.e_prices_no_tier" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.e_max_difference">
<code class="sig-name descname">e_max_difference</code><a class="headerlink" href="#python.tariff_functions.Tariff.e_max_difference" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum energy price differential within any single day</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.energy_rate_unit">
<code class="sig-name descname">energy_rate_unit</code><a class="headerlink" href="#python.tariff_functions.Tariff.energy_rate_unit" title="Permalink to this definition">¶</a></dt>
<dd><p>kWh or kWh/day, for guiding the bill calculations later</p>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.Tariff.demand_rate_unit">
<code class="sig-name descname">demand_rate_unit</code><a class="headerlink" href="#python.tariff_functions.Tariff.demand_rate_unit" title="Permalink to this definition">¶</a></dt>
<dd><p>kW or kW/day, for guiding the bill calculations later</p>
</dd></dl>

<div class="admonition-todo admonition" id="id8">
<p class="admonition-title">Todo</p>
<p>Peak_kW_capacity and other scalar variables may be being imported as tuples.
this may have been solved now, but general unit check would be good.</p>
</div>
<dl class="py method">
<dt id="python.tariff_functions.Tariff.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_day</span><span class="o">=</span><span class="default_value">6</span></em>, <em class="sig-param"><span class="n">urdb_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">json_file_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dict_obj</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">api_key</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/tariff_functions.html#Tariff.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.tariff_functions.Tariff.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Tariff Function object based on a urdb id, a .csv file, or a blank tariff is created.</p>
</dd></dl>

<dl class="py method">
<dt id="python.tariff_functions.Tariff.define_d_flat">
<code class="sig-name descname">define_d_flat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d_flat_levels</span></em>, <em class="sig-param"><span class="n">d_flat_prices</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/tariff_functions.html#Tariff.define_d_flat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.tariff_functions.Tariff.define_d_flat" title="Permalink to this definition">¶</a></dt>
<dd><p>Define flat demand charge periods, levels, and prices.</p>
</dd></dl>

<dl class="py method">
<dt id="python.tariff_functions.Tariff.define_d_tou">
<code class="sig-name descname">define_d_tou</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d_wkday_12by24</span></em>, <em class="sig-param"><span class="n">d_wkend_12by24</span></em>, <em class="sig-param"><span class="n">d_tou_levels</span></em>, <em class="sig-param"><span class="n">d_tou_prices</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/tariff_functions.html#Tariff.define_d_tou"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.tariff_functions.Tariff.define_d_tou" title="Permalink to this definition">¶</a></dt>
<dd><p>Define TOU demand charge periods, levels, and prices</p>
</dd></dl>

<dl class="py method">
<dt id="python.tariff_functions.Tariff.define_e">
<code class="sig-name descname">define_e</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">e_wkday_12by24</span></em>, <em class="sig-param"><span class="n">e_wkend_12by24</span></em>, <em class="sig-param"><span class="n">e_levels</span></em>, <em class="sig-param"><span class="n">e_prices</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/tariff_functions.html#Tariff.define_e"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.tariff_functions.Tariff.define_e" title="Permalink to this definition">¶</a></dt>
<dd><p>Define energy periods, levels, and prices</p>
</dd></dl>

<dl class="py method">
<dt id="python.tariff_functions.Tariff.write_json">
<code class="sig-name descname">write_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">json_file_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/tariff_functions.html#Tariff.write_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.tariff_functions.Tariff.write_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the current class object to a json file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>json_file_name</strong> (<em>str</em>) – Path to output file.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="python.tariff_functions.bill_calculator">
<code class="sig-prename descclassname">python.tariff_functions.</code><code class="sig-name descname">bill_calculator</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">load_profile</span></em>, <em class="sig-param"><span class="n">tariff</span></em>, <em class="sig-param"><span class="n">export_tariff</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/tariff_functions.html#bill_calculator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.tariff_functions.bill_calculator" title="Permalink to this definition">¶</a></dt>
<dd><p>Not vectorized for now. Next step will be pass in multiple profiles for the same tariff
2 styles of NEM: Full retail and fixed schedule value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>load_profile</strong> (<em>8760 profile of agent</em>) – </p></li>
<li><p><strong>tariff</strong> (<a class="reference internal" href="#python.tariff_functions.Tariff" title="python.tariff_functions.Tariff"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.tariff_functions.Tariff</span></code></a>) – Tariff class object</p></li>
<li><p><strong>export_tariff</strong> (<a class="reference internal" href="#python.tariff_functions.Export_Tariff" title="python.tariff_functions.Export_Tariff"><code class="xref py py-class docutils literal notranslate"><span class="pre">python.tariff_functions.Export_Tariff</span></code></a>) – Export tariff class object</p></li>
</ul>
</dd>
</dl>
<div class="admonition-todo admonition" id="id9">
<p class="admonition-title">Todo</p>
<ol class="arabic simple">
<li><p>Both energy and demand calcs (anything that uses piecewise calculator) doesn’t go below zero, because piecewise isn’t built to.
Therefore, credit can’t be earned in one period and applied to another.</p></li>
<li><p>My current approach sums for all periods, not just those in a month. Potentially inefficient, if it was dynamic it would be cheaper, but less clear.</p></li>
<li><p>Make this flexible for different hours increments (which will require more robust approach for power vs energy units)</p></li>
<li><p>Not sure what happens if there is no energy component in the tariff, at the moment</p></li>
<li><p>I haven’t checked the TOU export credit option yet.</p></li>
<li><p>I don’t make any type of check about what day of the week this calculator assumes your load profile is starting on <cite>e_period_charges</cite> wasn’t being built for non-NEM</p></li>
</ol>
</div>
</dd></dl>

<dl class="py function">
<dt id="python.tariff_functions.build_8760_from_12by24s">
<code class="sig-prename descclassname">python.tariff_functions.</code><code class="sig-name descname">build_8760_from_12by24s</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wkday_12by24</span></em>, <em class="sig-param"><span class="n">wkend_12by24</span></em>, <em class="sig-param"><span class="n">start_day</span><span class="o">=</span><span class="default_value">6</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/tariff_functions.html#build_8760_from_12by24s"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.tariff_functions.build_8760_from_12by24s" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct long-df (8760) from a weekday and weekend 12by24</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wkday_12by24</strong> (<em>numpy.ndarray</em>) – </p></li>
<li><p><strong>wkend_12by24</strong> (<em>numpy.ndarray</em>) – </p></li>
<li><p><strong>start_day</strong> (<em>int</em>) – Start day of 6 (default) equates to a Sunday.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="python.tariff_functions.design_tariff_for_portfolio">
<code class="sig-prename descclassname">python.tariff_functions.</code><code class="sig-name descname">design_tariff_for_portfolio</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">agent_df</span></em>, <em class="sig-param"><span class="n">avg_rev</span></em>, <em class="sig-param"><span class="n">peak_hour_indicies</span></em>, <em class="sig-param"><span class="n">summer_month_indicies</span></em>, <em class="sig-param"><span class="n">rev_f_d</span></em>, <em class="sig-param"><span class="n">rev_f_e</span></em>, <em class="sig-param"><span class="n">rev_f_fixed</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/tariff_functions.html#design_tariff_for_portfolio"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.tariff_functions.design_tariff_for_portfolio" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a tariff that would extract a given $/kWh from a portfolio of customers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent_df</strong> (<em>pandas.DataFrame</em>) – <p>Dataframe of agents</p>
<dl class="py attribute">
<dt id="python.tariff_functions.agent_df.load_profile">
<code class="sig-prename descclassname">agent_df.</code><code class="sig-name descname">load_profile</code><a class="headerlink" href="#python.tariff_functions.agent_df.load_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="python.tariff_functions.agent_df.weight">
<code class="sig-prename descclassname">agent_df.</code><code class="sig-name descname">weight</code><a class="headerlink" href="#python.tariff_functions.agent_df.weight" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

</p></li>
<li><p><strong>avg_rev</strong> (<em>float</em>) – $/kWh that the tariff would extract from the given portfolio of customers.</p></li>
<li><p><strong>rev_f_d</strong> (<em>array-like</em>) – Revenue strucutre for demand charges.
Format is [fraction of total revenue, fraction that comes from tou charges, fraction that comes from flat charges]
ex: [0.4875, 0.5, 0.5]</p></li>
<li><p><strong>rev_f_d</strong> – Revenue strucutre for energy charges.
Format is [fraction of total revenue, fraction that comes from off-peak hours, fraction that comes from on-peak hours]
ex: [0.4875, 0.20, 0.8]</p></li>
<li><p><strong>rev_f_fixed</strong> (<em>array-like</em>) – [fraction of revenue from fixed monthly charges].
ex: [0.025]</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>Peak hours are the same between demand and energy.</p></li>
<li><p>Peak hours only occur during the summer.</p></li>
</ol>
</div>
</dd></dl>

<dl class="py function">
<dt id="python.tariff_functions.download_tariffs_from_urdb">
<code class="sig-prename descclassname">python.tariff_functions.</code><code class="sig-name descname">download_tariffs_from_urdb</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">api_key</span></em>, <em class="sig-param"><span class="n">sector</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">utility</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">print_progress</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/tariff_functions.html#download_tariffs_from_urdb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.tariff_functions.download_tariffs_from_urdb" title="Permalink to this definition">¶</a></dt>
<dd><p>API request for URDB rates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>api_key</strong> (<em>str</em>) – Each user should get their own URDB API key: <a class="reference external" href="http://en.openei.org/services/api/signup/">http://en.openei.org/services/api/signup/</a></p></li>
<li><p><strong>sector</strong> (<em>str</em>) – One of Residential, Commercial, Industrial, Lighting</p></li>
<li><p><strong>utility</strong> (<em>str</em><em>, </em><em>optional</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe of URDB rates.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="python.tariff_functions.filter_tariff_df">
<code class="sig-prename descclassname">python.tariff_functions.</code><code class="sig-name descname">filter_tariff_df</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tariff_df</span></em>, <em class="sig-param"><span class="n">keyword_list</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">keyword_list_file</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">demand_units_to_exclude</span><span class="o">=</span><span class="default_value">['hp', 'kVA', 'kW daily', 'hp daily', 'kVA daily']</span></em>, <em class="sig-param"><span class="n">remove_expired</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/tariff_functions.html#filter_tariff_df"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.tariff_functions.filter_tariff_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter tariffs based on inclusion (e.g. keywords), or exclusion (e.g. demand units)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tariff_df</strong> (<em>pandas.DataFrame</em>) – dataframe of URDB tariffs created by <a class="reference internal" href="#python.tariff_functions.download_tariffs_from_urdb" title="python.tariff_functions.download_tariffs_from_urdb"><code class="xref py py-func docutils literal notranslate"><span class="pre">download_tariffs_from_urdb()</span></code></a>.</p></li>
<li><p><strong>keyword_list</strong> (<em>list of str</em><em>, </em><em>optional</em>) – list of keywords to search for in rate structure.</p></li>
<li><p><strong>keyword_list_file</strong> (<em>str</em>) – filepath to .txt file containing keywords to search for.</p></li>
<li><p><strong>demand_units_to_exclude</strong> (<em>list of str</em>) – exclude rates from URDB database if the units are contained in this list. Default values are <cite>hp</cite>,`kVA`,`kW daily`,`hp daily`,`kVA daily`</p></li>
<li><p><strong>remove_expired</strong> (<em>bool</em>) – exclude expired rates. Default is <cite>True</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="python.tariff_functions.load_config_params">
<code class="sig-prename descclassname">python.tariff_functions.</code><code class="sig-name descname">load_config_params</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_file_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/tariff_functions.html#load_config_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.tariff_functions.load_config_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Each user should fill in a config_template.json file.</p>
</dd></dl>

<dl class="py function">
<dt id="python.tariff_functions.tiered_calc_vec">
<code class="sig-prename descclassname">python.tariff_functions.</code><code class="sig-name descname">tiered_calc_vec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">values</span></em>, <em class="sig-param"><span class="n">levels</span></em>, <em class="sig-param"><span class="n">prices</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/tariff_functions.html#tiered_calc_vec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.tariff_functions.tiered_calc_vec" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-python.utility_functions">
<span id="python-utility-functions-module"></span><h2>python.utility_functions module<a class="headerlink" href="#module-python.utility_functions" title="Permalink to this headline">¶</a></h2>
<p>Assorted accessory functions.</p>
<dl class="py class">
<dt id="python.utility_functions.Timer">
<em class="property">class </em><code class="sig-prename descclassname">python.utility_functions.</code><code class="sig-name descname">Timer</code><a class="reference internal" href="../_modules/python/utility_functions.html#Timer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.utility_functions.Timer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="python.utility_functions.code_profiler">
<code class="sig-prename descclassname">python.utility_functions.</code><code class="sig-name descname">code_profiler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">out_dir</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/utility_functions.html#code_profiler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.utility_functions.code_profiler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="python.utility_functions.current_datetime">
<code class="sig-prename descclassname">python.utility_functions.</code><code class="sig-name descname">current_datetime</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format</span><span class="o">=</span><span class="default_value">'%Y_%m_%d_%Hh%Mm%Ss'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/utility_functions.html#current_datetime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.utility_functions.current_datetime" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="python.utility_functions.get_epoch_time">
<code class="sig-prename descclassname">python.utility_functions.</code><code class="sig-name descname">get_epoch_time</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/utility_functions.html#get_epoch_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.utility_functions.get_epoch_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="python.utility_functions.get_formatted_time">
<code class="sig-prename descclassname">python.utility_functions.</code><code class="sig-name descname">get_formatted_time</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/utility_functions.html#get_formatted_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.utility_functions.get_formatted_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="python.utility_functions.get_git_hash">
<code class="sig-prename descclassname">python.utility_functions.</code><code class="sig-name descname">get_git_hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/utility_functions.html#get_git_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.utility_functions.get_git_hash" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="python.utility_functions.get_logger">
<code class="sig-prename descclassname">python.utility_functions.</code><code class="sig-name descname">get_logger</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">log_file_path</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/utility_functions.html#get_logger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.utility_functions.get_logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="python.utility_functions.parse_command_args">
<code class="sig-prename descclassname">python.utility_functions.</code><code class="sig-name descname">parse_command_args</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">argv</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/utility_functions.html#parse_command_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.utility_functions.parse_command_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to parse the command line arguments</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>h</strong> (<em>str</em>) – help ‘dg_model.py -i &lt;Initiate Model?&gt; -y &lt;year&gt;’</p></li>
<li><p><strong>i</strong> (<em>str</em>) – Initiate model for 2010 and quit</p></li>
<li><p><strong>y</strong> (<em>int</em>) – Resume model solve in passed year</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>init_model</strong> (<em>bool</em>) – Should model initiate?</p></li>
<li><p><strong>resume_year</strong> (<em>float</em>) – Year model should resume</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="python.utility_functions.shutdown_log">
<code class="sig-prename descclassname">python.utility_functions.</code><code class="sig-name descname">shutdown_log</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">logger</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python/utility_functions.html#shutdown_log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#python.utility_functions.shutdown_log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-python">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-python" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="python.agent_mutation.html" class="btn btn-neutral float-right" title="python.agent_mutation package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, NREL

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>